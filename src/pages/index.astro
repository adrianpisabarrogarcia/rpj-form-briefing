---
export const prerender = false;

import Header from "../components/Header.astro";
import Layout from "../layouts/Layout.astro";

import { db } from "../lib/turso";
import { v4 as uuidv4 } from "uuid";

if (Astro.request.method === "POST") {
  const formData = await Astro.request.formData();
  console.log(formData);
  const uuid = uuidv4();
  console.log(uuid);
  const pages = "1-2-3-4-5-6"
  const url = `/preguntas-generales?uuid=${uuid}&pages=${pages}`;
  console.log(url);
  return Astro.redirect(url);
}
---

<Layout title="Inicio">
  <Header />
  <main class="w-full max-w-4xl mx-auto px-4 py-6">
    <h1 class="p-2 text-4xl font-bold">Briefing · Red Pastoral Juvenil'25</h1>
    <section class="p-2">
      <p class="mt-4 text-gray-700">
        Este formulario tiene como objetivo reunir respuestas del equipo de RPJ
        para recopilar información clave que permita diseñar una estrategia
        general de RPJ en 2025 y en adelante, para poder desarrollar planes
        específicos para los proyectos principales de RPJ.
      </p>
      <p class="mt-4 text-gray-700">
        Te pedimos que por favor puedas completar este formulario antes del 13
        de enero, no lo dejes pasar y te pedimos máxima implicación para poder
        conocer tu opinión y ver cuál es la mejor estrategia para RPJ.
      </p>
    </section>
    <form class="p-2 pt-5" method="POST">
      <!-- Campo: Nombre y Apellidos -->
      <div class="mb-6">
        <label for="nombre" class="block text-gray-800 font-bold mb-2">
          Nombre y Apellidos <span class="text-red-500">*</span>
        </label>
        <input
          type="text"
          id="nombre"
          name="nombre"
          placeholder="Tu nombre completo"
          class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-lime-600 focus:border-transparent"
          required
        />
      </div>

      <!-- Campo: Edad -->
      <div class="mb-6">
        <label for="edad" class="block text-gray-800 font-bold mb-2">
          Edad <span class="text-red-500">*</span>
        </label>
        <input
          type="number"
          id="edad"
          name="edad"
          placeholder="Tu edad"
          class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-lime-600 focus:border-transparent"
          required
        />
      </div>

      <!-- Campo: ¿A qué equipo pertenezco? -->
      <div class="mb-6">
        <label for="equipos" class="block text-gray-800 font-bold mb-2">
          ¿A qué equipo o equipos pertenezco? <span class="text-red-500">*</span
          >
        </label>
        <div>
          <label class="flex items-center mb-2">
            <input
              type="checkbox"
              name="equipo"
              value="impulsor"
              class="mr-2 text-lime-600 focus:ring-lime-500"
            />
            Equipo impulsor
          </label>
          <label class="flex items-center mb-2">
            <input
              type="checkbox"
              name="equipo"
              value="formacion"
              class="mr-2 text-lime-600 focus:ring-lime-500"
            />
            Equipo de formación
          </label>
          <label class="flex items-center mb-2">
            <input
              type="checkbox"
              name="equipo"
              value="red-joven"
              class="mr-2 text-lime-600 focus:ring-lime-500"
            />
            Equipo de red joven
          </label>
          <label class="flex items-center mb-2">
            <input
              type="checkbox"
              name="equipo"
              value="revista"
              class="mr-2 text-lime-600 focus:ring-lime-500"
            />
            Equipo de contenidos de revista o redacción
          </label>
          <label class="flex items-center mb-2">
            <input
              type="checkbox"
              name="equipo"
              value="comunicacion"
              class="mr-2 text-lime-600 focus:ring-lime-500"
            />
            Equipo de comunicación o TICs
          </label>
        </div>
      </div>

      <!-- Botón Siguiente -->
      <div>
        <button
          type="submit"
          class="w-full bg-black text-white py-2 px-4 rounded-md text-lg font-bold hover:bg-gray-800 flex items-center justify-center"
        >
          Siguiente
          <span class="ml-2">→</span>
        </button>
      </div>
    </form>
  </main>
</Layout>
